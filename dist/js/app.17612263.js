(function(t){function e(e){for(var a,n,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,r=1;r<s.length;r++){var c=s[r];0!==i[c]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},i={app:0},o=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"063c":function(t,e,s){},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},"1a7f":function(t,e,s){"use strict";var a=s("e7c7"),i=s.n(a);i.a},2:function(t,e){},"239a":function(t,e,s){"use strict";var a=s("4783"),i=s.n(a);i.a},3:function(t,e){},"3a5c":function(t,e,s){"use strict";var a=s("761e"),i=s.n(a);i.a},4:function(t,e){},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=o(t);return s(e)}function o(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=o,t.exports=i,i.id="4678"},4783:function(t,e,s){},"4afb":function(t,e,s){"use strict";var a=s("ecf9"),i=s.n(a);i.a},5:function(t,e){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},o=[],n={name:"App",components:{},data:function(){return{user:{isAdmin:!0,_id:"5f85d1e6ac855b3eb849724a",username:"Kokot1",password:"$2a$10$zPWUHKNmxLw.JShI09UBf.xi9qybn5ig9GRp5IoBfL/PdW90aUDvi",email:"petrbohac35@seznam.cz",firstName:"Petr",lastName:"Bohac",registeredAt:"2020-10-13T16:12:22.484Z"}}}},r=n,c=s("2877"),l=Object(c["a"])(r,i,o,!1,null,null,null),u=l.exports,d=s("289d"),m=(s("5abe"),s("b0c0"),s("96cf"),s("1da1")),f=s("8c4f"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dashboard"},[s("Hero",{attrs:{title:"Dashboard"}}),s("Navigation"),s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("nav",{staticClass:"level has-text-centered box my-5"},[s("div",{staticClass:"level-item"},[s("div",[s("p",{staticClass:"title"},[t._v(t._s(t.booksTotal))]),s("p",{staticClass:"heading"},[t._v("Books in total")])])]),s("div",{staticClass:"level-item"},[s("div",[s("p",{staticClass:"title"},[t._v(t._s(t.booksInUse))]),s("p",{staticClass:"heading"},[t._v("Books being read")])])]),s("div",{staticClass:"level-item"},[s("div",[s("p",{staticClass:"title"},[t._v(t._s(t.users))]),s("p",{staticClass:"heading"},[t._v("Active users")])])])])])]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("DashWelcome")],1),s("div",{staticClass:"column"},[s("UserBooks")],1)])]),s("Footer")],1)},v=[],p=s("5530"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",{staticClass:"footer has-text-weight-light has-background-grey-light has-text-light p-2"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column has-text-centered is-family-secondary is-hidden-tablet"},[s("p",[t._v("Copyright © "+t._s(t.currentYear)+" "+t._s(t.projectName)+". All Rights Reserved")]),s("p",[t._v("Created by "),s("a",{attrs:{href:t.author.link,target:"_blank"}},[t._v(t._s(t.author.name))])])]),s("div",{staticClass:"column has-text-centered is-hidden-desktop is-hidden-mobile"},[s("p",[t._v("Copyright © "+t._s(t.currentYear)+" "+t._s(t.projectName)+". All Rights Reserved | Created by "),s("a",{attrs:{href:t.author.link,target:"_blank"}},[t._v(t._s(t.author.name))])])]),s("div",{staticClass:"column has-text-centered is-hidden-touch"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("p",[t._v("Copyright © "+t._s(t.currentYear)+" "+t._s(t.projectName)+". All Rights Reserved")])]),s("div",{staticClass:"column"},[s("p",[t._v("Created by "),s("a",{attrs:{href:t.author.link,target:"_blank"}},[t._v(t._s(t.author.name))])])])])])])])},g=[],C={name:"Footer",components:{},data:function(){return{currentYear:(new Date).getFullYear(),projectName:"LMS",author:{name:"Petr Boháč",link:"https://github.com/Pzdrs"}}}},_=C,k=(s("e723"),Object(c["a"])(_,b,g,!1,null,"1904b7aa",null)),w=k.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar sticky is-info is-bold",attrs:{"aria-label":"main navigation"}},[s("div",{staticClass:"navbar-brand"},[s("router-link",{staticClass:"navbar-item",staticStyle:{"background-color":"#167df0"},attrs:{to:"/dashboard"}},[s("i",{staticClass:"fas fa-book is-size-3"}),s("p",{staticClass:"brand-text"},[t._v("LMS")])]),s("router-link",{staticClass:"navbar-item is-hidden-desktop",attrs:{to:"/profile"}},[s("i",{staticClass:"fas fa-user"})]),t._m(0),s("a",{staticClass:"navbar-item is-hidden-desktop has-text-danger",on:{click:t.logout}},[s("i",{staticClass:"fas fa-sign-out-alt"})])],1),t.blank?t._e():s("div",{staticClass:"navbar-menu has-text-centered",attrs:{id:"navbar"}},[s("div",{staticClass:"navbar-start"},t._l(t.links,(function(e){return s("router-link",{key:e.path,staticClass:"navbar-item",attrs:{to:e}},[t._v(" "+t._s(e.name)+" ")])})),1),s("div",{staticClass:"navbar-end"},[s("div",{staticClass:"navbar-item has-dropdown is-hidden-touch is-hoverable"},[t._m(1),s("div",{staticClass:"navbar-item navbar-dropdown"},[s("router-link",{staticClass:"navbar-item",attrs:{to:"/profile"}},[s("i",{staticClass:"fas fa-user mr-2"}),t._v(" Profile ")]),s("hr",{staticClass:"navbar-divider"}),s("a",{staticClass:"navbar-item has-text-danger",on:{click:t.logout}},[s("i",{staticClass:"fas fa-sign-out-alt mr-2 mt-1"}),t._v(" Sign out ")])],1)]),s("p",{staticClass:"navbar-item is-hidden-touch"},[t._v("Signed in as "+t._s(t.user.username))])])])])},N=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"navbar-burger",staticStyle:{margin:"auto 0"},attrs:{role:"button",title:"Navigation","aria-label":"menu","aria-expanded":"false","data-target":"navbar"}},[s("span",{attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"navbar-item has-text-white",attrs:{role:"button"}},[s("i",{staticClass:"fas fa-ellipsis-h"})])}],x=(s("4de4"),s("1157")),j=s.n(x),A=s("2f62"),B=Object(A["a"])("Auth"),$=B.mapGetters,U={name:"Navigation",components:{},props:{blank:Boolean},data:function(){return{}},mounted:function(){j()(document).ready((function(){j()(".navbar-burger").click((function(){j()(".navbar-burger").toggleClass("is-active"),j()(".navbar-menu").toggleClass("is-active")}))}))},methods:{logout:function(){this.$store.dispatch("Auth/signOut")}},computed:Object(p["a"])(Object(p["a"])({},$({user:"getUser"})),{},{links:function(){var t=this;return this.$router.options.routes.filter((function(t){return t.meta&&t.meta.navbar})).filter((function(e){return e.meta.requiresAdmin&&t.$store.getters["Auth/getUser"].isAdmin||!e.meta.requiresAdmin}))}})},P=U,O=(s("1a7f"),Object(c["a"])(P,y,N,!1,null,"7025cd13",null)),S=O.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hero is-primary is-bold has-text-centered"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title"},[t._v(t._s(t.title))]),s("hr"),s("h2",{staticClass:"subtitle"},[t._v("Library Management System")])])])])},E=[],F={name:"Hero",props:{title:String}},M=F,T=Object(c["a"])(M,D,E,!1,null,null,null),q=T.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"panel is-warning"},[s("p",{staticClass:"panel-heading"},[s("router-link",{staticClass:"has-text-black",attrs:{to:"/my-books"}},[t._v("My books")])],1),s("p",{staticClass:"panel-tabs"},[s("a",{class:t.isActive("all"),on:{click:function(e){return t.changeNav("all")}}},[t._v("All")]),s("a",{class:t.isActive("active"),on:{click:function(e){return t.changeNav("active")}}},[t._v("Active")]),s("a",{class:t.isActive("expired"),on:{click:function(e){return t.changeNav("expired")}}},[t._v("Expired")])]),t._l(t.filteredBooks.slice(0,5),(function(e){return s("a",{key:e._id,staticClass:"panel-block"},[t._m(0,!0),s("div",{staticClass:"book"},[s("p",{staticClass:"book-title"},[s("strong",[t._v(t._s(e.title))]),t._v(" by "+t._s(e.author.firstName)+" "+t._s(e.author.lastName)+" ")]),new Date(e.date.to).getTime()>(new Date).getTime()?s("p",{staticClass:"has-text-success"},[t._v("Due "+t._s(t.formatTime(e.date.to)))]):s("p",{staticClass:"has-text-danger"},[t._v("Expired on "+t._s(t.formatTime(e.date.to)))])])])})),0===t.filteredBooks.length?s("div",{staticClass:"panel-block"},[s("p",{staticStyle:{margin:"0 auto"}},[t._v("Not much of a reader, are you?")])]):t._e(),t.filteredBooks.length>5?s("div",{staticClass:"panel-block"},[s("router-link",{staticStyle:{margin:"0 auto"},attrs:{to:"/my-books"}},[t._v("and "),s("strong",[t._v(t._s(t.filteredBooks.length-5))]),t._v(" more... ")])],1):t._e()],2)},I=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"panel-icon"},[s("i",{staticClass:"fas fa-book",attrs:{"aria-hidden":"true"}})])}],Y=s("c1df"),H=s.n(Y),R=Object(A["a"])("Books"),z=R.mapGetters,G={name:"MyBooksPanel",data:function(){return{nav:"active"}},methods:{formatTime:function(t){var e=new Date(t);return H()(e).format("Do MMMM YYYY HH:mm")},changeNav:function(t){this.nav!==t&&(this.nav=t)},isActive:function(t){if(t===this.nav)return"is-active"}},created:function(){this.$store.dispatch("Books/fetchMyBooks")},computed:Object(p["a"])(Object(p["a"])({},z({books:"getMyBooks"})),{},{filteredBooks:function(){switch(this.nav){case"active":return this.books.filter((function(t){return new Date(t.date.to).getTime()>(new Date).getTime()})).sort((function(t,e){return new Date(t.date.to)-new Date(e.date.to)}));case"expired":return this.books.filter((function(t){return new Date(t.date.to).getTime()<(new Date).getTime()})).sort((function(t,e){return new Date(t.date.to)-new Date(e.date.to)}));default:return this.books}}})},W=G,Q=Object(c["a"])(W,L,I,!1,null,"06ff0c30",null),J=Q.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"message is-info"},[s("div",{staticClass:"message-header"},[s("p",[t._v("Welcome back, "+t._s(t.user.firstName)+".")])]),s("div",{staticClass:"message-body"},[s("div",{staticClass:"time has-text-centered pb-4 mb-1",staticStyle:{"border-bottom":"1px solid lightgray"}},[t._v(t._s(t.time))]),s("div",{staticClass:"qod has-text-centered"},[s("h1",{staticClass:"subtitle mb-2"},[t._v("Quote of the day")]),s("q",[t._v(t._s(t.quote))]),s("br"),s("small",{staticClass:"ml-3"},[t._v("— "+t._s(t.quoteAuthor))])])])])},X=[],V={name:"DashWelcome",computed:Object(p["a"])(Object(p["a"])({},Object(A["c"])({user:"Auth/getUser",quote:"Quote/getQuote",quoteAuthor:"Quote/getAuthor"})),{},{time:function(){var t=new Date;return"It's ".concat(H()(t).format("dddd Do of MMMM YYYY"),".")}})},Z=V,tt=Object(c["a"])(Z,K,X,!1,null,"f31cf740",null),et=tt.exports,st=Object(A["a"])("Statistics"),at=st.mapGetters,it={name:"Dashboard",computed:Object(p["a"])({},at({booksTotal:"getBooksTotal",booksInUse:"getBooksInUse",users:"getUsers"})),created:function(){this.$store.dispatch("Statistics/fetchStats"),this.$store.dispatch("Quote/fetchQuote")},components:{DashWelcome:et,UserBooks:J,Hero:q,Navigation:S,Footer:w}},ot=it,nt=Object(c["a"])(ot,h,v,!1,null,null,null),rt=nt.exports,ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"userProfile"},[s("Hero",{attrs:{title:"Your profile"}}),s("Navigation"),s("div",{staticClass:"container"},[s("div",{staticClass:"columns box is-hidden-desktop has-text-centered"},[s("div",{staticClass:"column"},[s("h1",{staticClass:"title mb-2 has-text-weight-light"},[t._v(t._s(t.user.firstName+" "+t.user.lastName))]),s("span",{staticClass:"rank subtitle",class:t.user.isAdmin?"admin":"user"})]),s("hr",{staticClass:"is-marginless"}),s("div",{staticClass:"column"},[s("Statistics")],1)]),s("div",{staticClass:"columns is-hidden-touch mt-2"},[s("div",{staticClass:"column"},[s("h1",{staticClass:"title mb-2 has-text-weight-light"},[t._v(t._s(t.user.firstName+" "+t.user.lastName))]),s("span",{staticClass:"rank subtitle",class:t.user.isAdmin?"admin":"user"})]),s("div",{staticClass:"column"},[s("Statistics")],1)]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-10-tablet is-offset-1-tablet is-8-desktop is-offset-2-desktop"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"card-content"},[s("ChangeGeneral")],1)])])]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-10-tablet is-offset-1-tablet is-8-desktop is-offset-2-desktop"},[s("div",{staticClass:"card"},[t._m(1),s("div",{staticClass:"card-content"},[s("ChangePassword")],1)])])]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-10-tablet is-offset-1-tablet is-8-desktop is-offset-2-desktop"},[s("div",{staticClass:"card"},[t._m(2),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("div",{staticClass:"buttons"},[s("button",{staticClass:"button button-smooth is-fullwidth is-outlined is-danger",on:{click:t.signOut}},[t._v("Sign out on all devices ")]),s("button",{staticClass:"button button-smooth is-fullwidth is-outlined is-danger",on:{click:t.deleteAccount}},[t._v("Delete account ")])])])])])])])]),s("Footer")],1)},lt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("General")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Change password")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Miscellaneous")])])}],ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"level has-text-centered"},[s("div",{staticClass:"level-item"},[s("div",[s("p",{staticClass:"heading"},[t._v("Registered for")]),s("p",{staticClass:"title"},[t._v(t._s(t.accountAge))]),s("p",{staticClass:"heading"},[t._v("days")])])]),s("div",{staticClass:"level-item"},[s("div",[s("p",{staticClass:"heading"},[t._v("Borrowed")]),s("p",{staticClass:"title"},[t._v(t._s(t.myBooks.length))]),s("p",{staticClass:"heading"},[t._v("books in total")])])]),s("div",{staticClass:"level-item"},[s("div",[s("p",{staticClass:"heading"},[t._v("Have")]),s("p",{staticClass:"title"},[t._v(" "+t._s(t.myBooks.filter((function(t){return new Date(t.date.to).getTime()>(new Date).getTime()})).length))]),s("p",{staticClass:"heading"},[t._v("books at home")])])])])},dt=[],mt={name:"Statistics",computed:Object(p["a"])(Object(p["a"])({},Object(A["c"])({user:"Auth/getUser",myBooks:"Books/getMyBooks"})),{},{accountAge:function(){var t=H()(new Date),e=H()(new Date(this.user.registeredAt));return t.diff(e,"days")}})},ft=mt,ht=Object(c["a"])(ft,ut,dt,!1,null,null,null),vt=ht.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.changePassword(e)}}},[s("b-field",[s("b-input",{attrs:{type:"password",placeholder:"Current password","icon-pack":"fas",icon:"lock",required:""},model:{value:t.currentPassword,callback:function(e){t.currentPassword=e},expression:"currentPassword"}})],1),s("b-field",[s("b-input",{attrs:{type:"password",placeholder:"New password","icon-pack":"fas",icon:"lock","password-reveal":"",required:""},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),s("b-field",[s("b-input",{attrs:{type:"password",placeholder:"Confirm new password","icon-pack":"fas",icon:"lock",required:""},model:{value:t.newPasswordConfirm,callback:function(e){t.newPasswordConfirm=e},expression:"newPasswordConfirm"}})],1),s("button",{staticClass:"button is-success is-outlined button-smooth",attrs:{type:"submit"}},[t._v("Change password")])],1)},bt=[],gt=s("279c"),Ct=s.n(gt),_t={name:"ChangePassword",data:function(){return{currentPassword:"",newPassword:"",newPasswordConfirm:""}},methods:{changePassword:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.$store.getters["Auth/getUser"],e.next=3,Ct.a.compare(t.currentPassword,s.password);case 3:if(!e.sent){e.next=7;break}t.newPassword===t.newPasswordConfirm||""===t.newPassword?t.$store.dispatch("Users/updateUser",{_id:s._id,password:t.newPassword}).then((function(){alert("You successfully changed your password.")})):alert("Your new password does not match the confirmation password."),e.next=8;break;case 7:alert("Your current password is invalid.");case 8:case"end":return e.stop()}}),e)})))()}}},kt=_t,wt=Object(c["a"])(kt,pt,bt,!1,null,"62072f22",null),yt=wt.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"content",on:{submit:function(e){return e.preventDefault(),t.updateProfile(e)}}},[s("b-field",{attrs:{label:"First name"}},[s("div",{staticClass:"control has-icons-left"},[s("b-input",{attrs:{placeholder:t.user.firstName,required:""},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),s("span",{staticClass:"icon is-small is-left"},[t._v(" F ")])],1)]),s("b-field",{attrs:{label:"Last name"}},[s("div",{staticClass:"control has-icons-left"},[s("b-input",{attrs:{placeholder:t.user.lastName,required:""},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),s("span",{staticClass:"icon is-small is-left"},[t._v(" L ")])],1)]),s("b-field",{attrs:{label:"Email"}},[s("b-input",{attrs:{value:t.user.email,"icon-pack":"fas",icon:"envelope",disabled:""}})],1),s("button",{staticClass:"button is-success is-outlined button-smooth"},[t._v("Submit")])],1)},xt=[],jt=(s("99af"),Object(A["a"])("Auth")),At=jt.mapGetters,Bt={name:"ChangeGeneral",data:function(){return{firstName:"",lastName:""}},computed:Object(p["a"])({},At({user:"getUser"})),methods:{updateProfile:function(){var t=this;this.$store.dispatch("Users/updateUser",{_id:this.user._id,firstName:this.firstName,lastName:this.lastName}).then((function(){t.$store.commit("Auth/updateName",{firstName:t.firstName,lastName:t.lastName}),t.$store.dispatch("Users/reFetchUsers"),alert("Successfully changed your name to ".concat(t.firstName," ").concat(t.lastName)),t.$data.firstName="",t.$data.lastName=""}))}}},$t=Bt,Ut=Object(c["a"])($t,Nt,xt,!1,null,"40611001",null),Pt=Ut.exports,Ot=Object(A["a"])("Auth"),St=Ot.mapGetters,Dt={name:"User-profile",created:function(){this.$store.dispatch("Books/fetchMyBooks")},components:{ChangeGeneral:Pt,ChangePassword:yt,Navigation:S,Hero:q,Statistics:vt,Footer:w},computed:Object(p["a"])({},St({user:"getUser"})),methods:{deleteAccount:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.$store.getters["Auth/getUser"],!confirm("Are you sure you want to delete your account?\nYou will be asked to enter your password for confirmation.")){e.next=10;break}return a=prompt("Please enter your password:"),e.next=5,Ct.a.compare(a,s.password);case 5:if(!e.sent){e.next=9;break}t.$store.dispatch("Users/deleteUser",{_id:s._id}).then((function(){t.$store.dispatch("Auth/signOut")})).catch((function(t){var e=t.response;alert(e.data.message)})),e.next=10;break;case 9:alert("The entered password is invalid.");case 10:case"end":return e.stop()}}),e)})))()},signOut:function(){this.$store.dispatch("Auth/signOutEverywhere")}}},Et=Dt,Ft=Object(c["a"])(Et,ct,lt,!1,null,"25cb1e4a",null),Mt=Ft.exports,Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"welcome"},[s("div",{staticClass:"hero is-primary is-fullheight is-bold"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-hidden-touch"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title"},[t._v("Library Management System")]),s("h2",{staticClass:"subtitle"},[t._v("A simple solution to librarianship.")]),s("b-button",{staticClass:"is-primary button-smooth mr-3",attrs:{tag:"a",label:"Get Started",inverted:"",outlined:""},on:{click:function(e){return t.$router.push("/signup")}}})],1)]),s("div",{staticClass:"column is-hidden-touch"},[s("div",{staticClass:"container"},[s("b-carousel",{staticClass:"has-text-centered"},t._l(t.carousels,(function(e,a){return s("b-carousel-item",{key:a,staticClass:"pb-1"},[s("h1",{staticClass:"title"},[t._v(t._s(e.text))])])})),1)],1)]),s("div",{staticClass:"column has-text-centered is-hidden-desktop"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title"},[t._v("Library Management System")]),s("h2",{staticClass:"subtitle"},[t._v("A simple solution to librarianship.")]),s("b-button",{staticClass:"is-primary button-smooth mb-3",attrs:{tag:"a",label:"Get Started",inverted:"",outlined:""},on:{click:function(e){return t.$router.push("/signup")}}}),s("b-carousel",{staticClass:"has-text-centered"},t._l(t.carousels,(function(e,a){return s("b-carousel-item",{key:a,staticClass:"pb-1"},[s("h1",{staticClass:"title"},[t._v(t._s(e.text))])])})),1)],1)])])])])])])},qt=[],Lt={name:"Welcome",data:function(){return{carousels:[{text:"VueJS based frontend"},{text:"Modern UI/UX by Buefy"},{text:"NodeJS/Express API"},{text:"NoSQL database provided by MongoDB"}],signUpActive:!1,loginActive:!1}}},It=Lt,Yt=(s("3a5c"),Object(c["a"])(It,Tt,qt,!1,null,"c0f2aa32",null)),Ht=Yt.exports,Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-not-found has-text-centered"},[s("Hero",{attrs:{title:"Oops, page not found.."}}),s("h1",{staticClass:"title"},[t._v("404")]),s("Footer")],1)},zt=[],Gt={name:"404",components:{Hero:q,Footer:w}},Wt=Gt,Qt=(s("584e"),Object(c["a"])(Wt,Rt,zt,!1,null,"6f2a6e92",null)),Jt=Qt.exports,Kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("Hero",{attrs:{title:"Sign in to LMS"}}),s("div",{staticClass:"container"},[s("div",{staticClass:"columns has-text-centered"},[s("div",{staticClass:"\n    column\n    is-10-mobile is-offset-1-mobile\n    is-8-tablet is-offset-2-tablet\n    is-6-desktop is-offset-3-desktop\n    is-4-widescreen is-offset-4-widescreen"},["login"===t.nav?s("form",{staticClass:"box",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[t.loginResult?s("div",{staticClass:"notification is-danger is-light p-2"},[t._v(" "+t._s(t.loginResult)+" ")]):t._e(),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",attrs:{type:"text",placeholder:"Username or email",autocomplete:"on",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._m(0)])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password",autocomplete:"on",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(1)])]),t._m(2),t._m(3),s("router-link",{attrs:{to:"/forgot-password"}},[t._v(" Forgot password? ")]),t._v(" 🞄 "),s("router-link",{attrs:{to:"/signup"}},[t._v(" Don't have an account? ")])],1):t._e()])])]),s("Footer")],1)},Xt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-user"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-lock"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("label",{staticClass:"checkbox"},[s("input",{attrs:{type:"checkbox"}}),t._v(" Remember me ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button button-smooth is-outlined is-primary is-medium is-fullwidth is-rounded",attrs:{type:"submit"}},[s("i",{staticClass:"fas fa-sign-in-alt mr-2"}),t._v(" Sign In ")])])])}],Vt={name:"Login",components:{Hero:q,Footer:w},data:function(){return{username:"",password:"",loginResult:"",email:"",nav:"login"}},methods:{login:function(){var t=this;this.$store.dispatch("Auth/LOGIN",{password:this.password,username:this.username}).then((function(e){t.loginResult=e.message}))},changeNav:function(t){this.nav=t}}},Zt=Vt,te=(s("239a"),Object(c["a"])(Zt,Kt,Xt,!1,null,"392642fa",null)),ee=te.exports,se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sign-up"},[s("Hero",{attrs:{title:"Sign up for LMS"}}),s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"\n    column\n    has-text-centered\n    is-10-mobile is-offset-1-mobile\n    is-8-tablet is-offset-2-tablet\n    is-6-desktop is-offset-3-desktop\n    is-4-widescreen is-offset-4-widescreen"},[s("form",{staticClass:"box",on:{submit:function(e){return e.preventDefault(),t.signUp(e)}}},[""!==t.result.message?s("div",{staticClass:"notification is-light p-2",class:t.result.success?"is-success":"is-danger"},[t._v(" "+t._s(t.result.message)+" ")]):t._e(),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",attrs:{type:"text",placeholder:"Username",autocomplete:"on",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._m(0)])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"input",attrs:{type:"text",placeholder:"First name",autocomplete:"on",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}}),s("span",{staticClass:"icon is-small is-left"},[t._v(" F ")])])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"input",attrs:{type:"text",placeholder:"Last name",autocomplete:"on",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),s("span",{staticClass:"icon is-small is-left"},[t._v(" L ")])])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email",autocomplete:"on",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(1)])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{id:"password",type:"password",placeholder:"Password",autocomplete:"on",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(2)])]),t._m(3),s("router-link",{attrs:{to:"/login"}},[s("a",[t._v("Already have an account?")])])],1)])])]),s("Footer")],1)},ae=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-user"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-lock"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button button-smooth is-outlined is-primary is-medium is-fullwidth is-rounded",attrs:{type:"submit"}},[s("i",{staticClass:"fas fa-sign-in-alt mr-2"}),t._v(" Sign Up ")])])])}],ie={name:"Sign-up",data:function(){return{username:"",firstName:"",lastName:"",email:"",password:"",result:{success:!0,message:""}}},components:{Hero:q,Footer:w},methods:{signUp:function(){var t=this;this.$store.dispatch("Auth/registerNewUser",{username:this.username,firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password}).then((function(){t.$store.dispatch("Auth/LOGIN",{username:t.username,password:t.password})})).catch((function(e){e.response.data.message.details&&0!==e.response.data.message.details.length?t.result={success:!1,message:e.response.data.message.details[0].message}:t.result={success:!1,message:e.response.data.message}}))}}},oe=ie,ne=(s("ee6e"),Object(c["a"])(oe,se,ae,!1,null,"9c0c29f4",null)),re=ne.exports,ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"books"},[s("Hero",{attrs:{title:"Books"}}),s("Navigation"),s("div",{staticClass:"container is-fluid my-5"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2"},[s("aside",{staticClass:"menu"},["books"===t.nav||"authors"===t.nav?s("div",[s("p",{staticClass:"menu-label"},[t._v(" Search ")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"input",attrs:{type:"text",placeholder:t.searchPlaceholder},domProps:{value:t.filter},on:{input:function(e){e.target.composing||(t.filter=e.target.value)}}})])]):t._e(),s("p",{staticClass:"menu-label"},[t._v(" General ")]),s("ul",{staticClass:"menu-list"},[s("li",[s("a",{class:t.isActive("books","book-update","book-borrow"),on:{click:function(e){return t.changeNav("books")}}},[t._v("Books "),s("span",{staticClass:"is-pulled-right"},[t._v(t._s(t.books.length))])])]),s("li",[s("a",{class:t.isActive("authors","author-update"),on:{click:function(e){return t.changeNav("authors")}}},[t._v("Authors "),s("span",{staticClass:"is-pulled-right"},[t._v(t._s(t.authors.length))])])])]),t.isAdmin()?s("div",[s("p",{staticClass:"menu-label"},[t._v(" Administration ")]),s("ul",{staticClass:"menu-list"},[s("li",[s("a",{class:t.isActive("book-create"),on:{click:function(e){return t.changeNav("book-create")}}},[t._v("Add new book")])]),s("li",[s("a",{class:t.isActive("author-create"),on:{click:function(e){return t.changeNav("author-create")}}},[t._v("Add new author")])])])]):t._e()])]),s("div",{staticClass:"column is-10"},["books"===this.nav?s("div",{staticClass:"container"},t._l(t.books.filter((function(e){var s=e.title,a=e.isbn;e.author;return s.toLowerCase().includes(t.filter)||a.toLowerCase().includes(t.filter)})),(function(e){return s("article",{key:e._id,staticClass:"message"},[s("div",{staticClass:"message-header"},[s("span",[s("a",{staticStyle:{"text-decoration":"none"},attrs:{target:"_blank"}},[t._v(t._s(e.title)+" ("+t._s(e.writtenIn)+")")]),t.isAvailable(e)?s("span",{staticClass:"tag is-danger is-light ml-2"},[t._v("Unavailable")]):s("span",{staticClass:"tag is-success is-light ml-2"},[t._v("Available")]),t.isAdmin()?s("span",{staticClass:"ml-2"},[s("a",{staticClass:"mt-3 mx-3",on:{click:function(s){return t.deleteBook(e)}}},[s("i",{staticClass:"fas fa-trash has-text-danger"})]),s("a",{staticClass:"mt-3 mx-3",on:{click:function(s){t.updateBook(e),t.changeNav("book-update")}}},[s("i",{staticClass:"fas fa-edit has-text-info"})])]):t._e()]),null!==e.author?s("span",{staticClass:"has-text-weight-light"},[t._v("by "+t._s(e.author.firstName)+" "+t._s(e.author.lastName)+" ")]):s("span",{staticClass:"has-text-weight-light"},[t._v(" by Unknown Author ")])]),s("div",{staticClass:"message-body"},[s("div",{staticClass:"content"},[s("p",[s("strong",[t._v("Pages:")]),t._v(" "+t._s(e.pageCount))]),s("p",[s("strong",[t._v("ISBN:")]),t._v(" "+t._s(e.isbn))]),s("button",{staticClass:"button button-smooth is-outlined is-info",attrs:{disabled:t.isAvailable(e)},on:{click:function(s){t.borrowBook(e),t.changeNav("book-borrow")}}},[t._v("Borrow ")])])])])})),0):t._e(),"authors"===this.nav?s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},t._l(t.authors.filter((function(e){var s=e.firstName,a=e.lastName;return s.toLowerCase().includes(t.filter)||a.toLowerCase().includes(t.filter)})),(function(e){return s("div",{key:e._id,staticClass:"card mb-3"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"media"},[t._m(0,!0),s("div",{staticClass:"media-content"},[s("p",{staticClass:"title is-4"},[t._v(t._s(e.firstName)+" "+t._s(e.lastName))]),s("p",{staticClass:"subtitle has-text-weight-light is-6"},[t._v(t._s(new Date(e.born).getFullYear())+" - "+t._s(null===e.died?"Hasn't died yet":new Date(e.died).getFullYear()))])])]),s("div",{staticClass:"content"},[t._v(" Added on "+t._s(t.addedOn(e.createdAt).format("Do MMMM YYYY HH:mm"))+" ")]),t.isAdmin()?s("div",{staticClass:"card-footer"},[s("a",{staticClass:"mt-3 mx-3",on:{click:function(s){return t.deleteAuthor(e)}}},[s("i",{staticClass:"fas fa-trash has-text-danger"})]),s("a",{staticClass:"mt-3 mx-3",on:{click:function(s){t.updateAuthor(e),t.changeNav("author-update")}}},[s("i",{staticClass:"fas fa-edit has-text-info"})])]):t._e()])])})),0)])]):t._e(),"author-create"===this.nav?s("CreateAuthor"):t._e(),"book-create"===this.nav?s("CreateBook"):t._e(),"book-update"===this.nav?s("UpdateBook",{attrs:{book:t.bookToUpdate},on:{changeNav:t.changeNav}}):t._e(),"author-update"===this.nav?s("UpdateAuthor",{attrs:{author:t.authorToUpdate},on:{changeNav:t.changeNav}}):t._e(),"book-borrow"===this.nav?s("BorrowBook",{attrs:{book:this.bookToBorrow},on:{changeNav:t.changeNav}}):t._e()],1)])]),s("Footer")],1)},le=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"media-left"},[s("i",{staticClass:"fas fa-user fa-4x",staticStyle:{color:"#7957d5"}})])}],ue=(s("caad"),s("2532"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.createBook(e)}}},[""!==t.result.message?s("article",{staticClass:"message mt-5",class:t.result.success?"is-success":"is-danger"},[s("div",{staticClass:"message-header"},[s("p",[t._v(t._s(t.result.message))])])]):t._e(),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Title")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.title,expression:"book.title"}],staticClass:"input",attrs:{type:"text",placeholder:"The Chronicles of Narnia: The Lion, the Witch and the Wardrobe",required:""},domProps:{value:t.book.title},on:{input:function(e){e.target.composing||t.$set(t.book,"title",e.target.value)}}}),t._m(0)])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Author")]),s("div",{staticClass:"control has-icons-left"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.book.author,expression:"book.author"}],attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.book,"author",e.target.multiple?s:s[0])}}},t._l(t.getAuthors,(function(e){return s("option",{key:e["_id"],domProps:{value:e["_id"]}},[t._v(t._s(e.firstName)+" "+t._s(e.lastName)+" ")])})),0),t._m(1)])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("ISBN")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.isbn,expression:"book.isbn"}],staticClass:"input",attrs:{type:"text",placeholder:"000721152X",required:""},domProps:{value:t.book.isbn},on:{input:function(e){e.target.composing||t.$set(t.book,"isbn",e.target.value)}}}),t._m(2)])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("label",{staticClass:"label"},[t._v("Page count")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.pageCount,expression:"book.pageCount"}],staticClass:"input",attrs:{type:"number",required:""},domProps:{value:t.book.pageCount},on:{input:function(e){e.target.composing||t.$set(t.book,"pageCount",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("label",{staticClass:"label"},[t._v("Written in")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.writtenIn,expression:"book.writtenIn"}],staticClass:"input",attrs:{type:"number",placeholder:"1950"},domProps:{value:t.book.writtenIn},on:{input:function(e){e.target.composing||t.$set(t.book,"writtenIn",e.target.value)}}})])]),s("button",{staticClass:"button is-outlined button-smooth is-success mr-3"},[t._v(" Submit ")]),s("button",{staticClass:"button is-outlined button-smooth is-link",attrs:{type:"reset"}},[t._v(" Reset ")])])}),de=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-left"},[s("i",{staticClass:"fas fa-book"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-left"},[s("i",{staticClass:"fas fa-user"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-left"},[s("i",{staticClass:"fas fa-barcode"})])}],me=Object(A["a"])("Books"),fe=me.mapGetters,he={name:"CreateBook",data:function(){return{book:{title:"",author:"",isbn:"",pageCount:0,writtenIn:""},result:{success:!0,message:""}}},methods:{createBook:function(){var t=this;this.$store.dispatch("Books/createBook",this.book).then((function(){t.result={success:!0,message:"Successfully added new book"},t.$store.dispatch("Books/reFetchAllBooks")})).catch((function(e){t.result={success:!1,message:e.response.data.message}}))}},computed:Object(p["a"])({},fe(["getAuthors"]))},ve=he,pe=Object(c["a"])(ve,ue,de,!1,null,"5a470cea",null),be=pe.exports,ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{onsubmit:"this.reset()"},on:{submit:function(e){return e.preventDefault(),t.createAuthor(e)}}},[""!==t.result.message?s("article",{staticClass:"message mt-5",class:t.result.success?"is-success":"is-danger"},[s("div",{staticClass:"message-header"},[s("p",[t._v(t._s(t.result.message))]),s("button",{staticClass:"delete",attrs:{"aria-label":"delete"}})])]):t._e(),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("First name")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"input",attrs:{type:"text",placeholder:"Clive",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}}),s("span",{staticClass:"icon is-left"},[t._v(" F ")])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Last name")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"input",attrs:{type:"text",placeholder:"Staples Lewis",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),s("span",{staticClass:"icon is-left"},[t._v(" L ")])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Born")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.born,expression:"born"}],staticClass:"input",attrs:{type:"date",required:""},domProps:{value:t.born},on:{input:function(e){e.target.composing||(t.born=e.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Died")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.died,expression:"died"}],staticClass:"input",attrs:{type:"date"},domProps:{value:t.died},on:{input:function(e){e.target.composing||(t.died=e.target.value)}}})])]),s("button",{staticClass:"button is-outlined button-smooth is-success mr-3",attrs:{type:"submit"}},[t._v(" Submit ")]),s("button",{staticClass:"button is-outlined button-smooth is-link",attrs:{type:"reset"}},[t._v(" Reset ")])])},Ce=[],_e={name:"CreateAuthor",data:function(){return{firstName:"",lastName:"",born:"",died:"",result:{success:!0,message:""}}},methods:{createAuthor:function(){var t=this;this.$store.dispatch("Books/createAuthor",{firstName:this.firstName,lastName:this.lastName,born:this.born,died:this.died}).then((function(){t.result={success:!0,message:"Successfully added new author"}})).catch((function(e){t.result={success:!1,message:e.response.data.message}}))}}},ke=_e,we=Object(c["a"])(ke,ge,Ce,!1,null,"ef66ee80",null),ye=we.exports,Ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.updateBook(e)}}},[""!==t.result.message?s("article",{staticClass:"message is-danger mt-5"},[s("div",{staticClass:"message-header"},[s("p",[t._v(t._s(t.result.message))])])]):t._e(),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Title")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.data.title},on:{input:function(e){e.target.composing||t.$set(t.data,"title",e.target.value)}}}),t._m(0)])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Author")]),s("div",{staticClass:"control has-icons-left"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.data.author,expression:"data.author"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"author",e.target.multiple?s:s[0])}}},t._l(t.getAuthors,(function(e){return s("option",{key:e._id,domProps:{value:e._id}},[t._v(t._s(e.firstName)+" "+t._s(e.lastName)+" ")])})),0),t._m(1)])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("ISBN")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.isbn,expression:"data.isbn"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.data.isbn},on:{input:function(e){e.target.composing||t.$set(t.data,"isbn",e.target.value)}}}),t._m(2)])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("label",{staticClass:"label"},[t._v("Page count")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.pageCount,expression:"data.pageCount"}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.data.pageCount},on:{input:function(e){e.target.composing||t.$set(t.data,"pageCount",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("label",{staticClass:"label"},[t._v("Written in")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.writtenIn,expression:"data.writtenIn"}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.data.writtenIn},on:{input:function(e){e.target.composing||t.$set(t.data,"writtenIn",e.target.value)}}})])]),s("button",{staticClass:"button is-outlined button-smooth is-success mr-3"},[t._v(" Submit ")])])},xe=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-left"},[s("i",{staticClass:"fas fa-book"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-left"},[s("i",{staticClass:"fas fa-user"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-left"},[s("i",{staticClass:"fas fa-barcode"})])}],je=Object(A["a"])("Books"),Ae=je.mapGetters,Be={name:"UpdateBook",props:["book"],data:function(){return{data:{title:this.book.title,author:this.book.author._id,isbn:this.book.isbn,pageCount:this.book.pageCount,writtenIn:this.book.writtenIn},result:{success:!0,message:""}}},methods:{updateBook:function(){var t=this;this.$store.dispatch("Books/updateBook",{id:this.book._id,data:this.data}).then((function(){t.$emit("changeNav","books")})).catch((function(e){t.result={success:!1,message:e.response.data.message}}))}},computed:Object(p["a"])({},Ae(["getAuthors"]))},$e=Be,Ue=Object(c["a"])($e,Ne,xe,!1,null,"188bef2e",null),Pe=Ue.exports,Oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.updateAuthor(e)}}},[""!==t.result.message?s("article",{staticClass:"message is-danger mt-5"},[s("div",{staticClass:"message-header"},[s("p",[t._v(t._s(t.result.message))]),s("button",{staticClass:"delete",attrs:{"aria-label":"delete"}})])]):t._e(),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("First name")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.firstName,expression:"data.firstName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.data.firstName},on:{input:function(e){e.target.composing||t.$set(t.data,"firstName",e.target.value)}}}),s("span",{staticClass:"icon is-left"},[t._v(" F ")])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Last name")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.lastName,expression:"data.lastName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.data.lastName},on:{input:function(e){e.target.composing||t.$set(t.data,"lastName",e.target.value)}}}),s("span",{staticClass:"icon is-left"},[t._v(" L ")])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Born")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.born,expression:"data.born"}],staticClass:"input",attrs:{type:"date"},domProps:{value:t.data.born},on:{input:function(e){e.target.composing||t.$set(t.data,"born",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Died")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.died,expression:"data.died"}],staticClass:"input",attrs:{type:"date"},domProps:{value:t.data.died},on:{input:function(e){e.target.composing||t.$set(t.data,"died",e.target.value)}}})])]),s("button",{staticClass:"button is-outlined button-smooth is-success mr-3",attrs:{type:"submit"}},[t._v(" Submit ")])])},Se=[],De=(s("ac1f"),s("1276"),{name:"UpdateAuthor",props:["author"],data:function(){return{data:{firstName:this.author.firstName,lastName:this.author.lastName,born:new Date(this.author.born).toISOString().split("T")[0],died:new Date(this.author.died).toISOString().split("T")[0]},result:{success:!0,message:""}}},methods:{updateAuthor:function(){var t=this;this.$store.dispatch("Books/updateAuthor",{id:this.author._id,data:this.data}).then((function(){t.$emit("changeNav","authors")})).catch((function(e){t.result={success:!1,message:e.response.data.message}}))}}}),Ee=De,Fe=Object(c["a"])(Ee,Oe,Se,!1,null,"055afe55",null),Me=Fe.exports,Te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"borrow-book"},[s("h1",{staticClass:"title has-text-centered"},[t._v("Borrow a book")]),s("h1",{staticClass:"subtitle has-text-centered"},[t._v(t._s(this.book.title))]),s("hr"),""===this.nav?s("form",{on:{submit:function(e){return e.preventDefault(),t.changeNav("summary")}}},[s("h1",{staticClass:"title has-text-centered"},[t._v("Pre-requirements")]),s("label",{staticClass:"label required"},[t._v("For how long are you planning on keeping this book?")]),s("b-field",{staticClass:"field"},[s("b-input",{attrs:{type:"number",placeholder:"Number of days",min:"1",max:"90","validation-message":"A book can be borrowed for maximum of 90 days (3 months)",required:""},model:{value:t.period,callback:function(e){t.period=t._n(e)},expression:"period"}})],1),s("button",{staticClass:"button is-success is-outlined button-smooth",attrs:{type:"button"},on:{click:function(e){return t.changeNavOuter("books")}}},[s("i",{staticClass:"fas fa-arrow-left mr-1"}),t._v(" Back to Books ")]),t._m(0)],1):t._e(),"summary"===this.nav?s("div",[s("h1",{staticClass:"title has-text-centered"},[t._v("Summary")]),s("table",{staticClass:"table is-bordered is-striped is-narrow is-hoverable is-fullwidth"},[s("tbody",[s("tr",[s("th",[t._v("Book")]),s("td",[t._v(t._s(this.book.title))])]),s("tr",[s("th",[t._v("Today's date")]),s("td",[t._v(t._s(t.formatDate(new Date)))])]),s("tr",[s("th",[t._v("Booked for")]),s("td",[t._v(t._s(this.period)+" day(s)")])]),s("tr",[s("th",[t._v("Date of return")]),s("td",[t._v(t._s(t.formatDate("")))])])])]),s("button",{staticClass:"button is-success is-outlined button-smooth",attrs:{type:"button"},on:{click:function(e){return t.changeNav("")}}},[s("i",{staticClass:"fas fa-arrow-left mr-1"}),t._v(" Previous ")]),s("button",{staticClass:"button is-success is-outlined button-smooth is-pulled-right",on:{click:t.borrowBook}},[t._v("Finish")])]):t._e()])},qe=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button is-success is-outlined button-smooth is-pulled-right",attrs:{type:"submit"}},[t._v(" Next "),s("i",{staticClass:"fas fa-arrow-right ml-1"})])}],Le={name:"BorrowBook",props:["book"],data:function(){return{period:1,nav:""}},methods:{changeNav:function(t){this.nav=t},changeNavOuter:function(t){this.$emit("changeNav",t)},borrowBook:function(){var t=this;this.$store.dispatch("Books/borrowBook",{book:this.book._id,user:this.$store.getters["Auth/getUser"]._id,to:H()().add(this.period,"d").unix()}).then((function(){t.$store.dispatch("Books/reFetchMyBooks"),t.$store.dispatch("Books/reFetchAllBooks"),t.$store.getters["Auth/getUser"].isAdmin&&t.$store.dispatch("Books/reFetchHistory"),alert("You successfully borrowed ".concat(t.book.title,". You have ").concat(t.period," day(s) to return it.")),t.changeNavOuter("books")})).catch((function(){alert("There has been a problem while trying to borrow a book, please try again later.")}))},formatDate:function(t){return""===t?H()().add(this.period,"d").format("dddd Do of MMMM YYYY"):H()(t).format("dddd Do of MMMM YYYY")}}},Ie=Le,Ye=(s("4afb"),Object(c["a"])(Ie,Te,qe,!1,null,"dde4b1ec",null)),He=Ye.exports,Re={name:"Books",data:function(){return{filter:"",nav:"books",bookToUpdate:{},bookToBorrow:{},authorToUpdate:{}}},created:function(){this.$store.dispatch("Books/fetchAuthors"),this.$store.dispatch("Books/fetchAllBooks")},methods:{isActive:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];if(e.includes(this.nav))return"is-active"},changeNav:function(t){this.nav!==t&&(this.nav=t)},addedOn:function(t){return H()(t)},deleteAuthor:function(t){confirm("Are you sure you want to delete author: ".concat(t.firstName," ").concat(t.lastName))&&this.$store.dispatch("Books/deleteAuthor",t._id).then((function(t){alert("Successfully deleted author ".concat(t.data.author.firstName," ").concat(t.data.author.lastName))})).catch((function(){alert("An unexpected error occurred while deleting this author")}))},updateAuthor:function(t){this.authorToUpdate=t},deleteBook:function(t){confirm("Are you sure you want to delete book: ".concat(t.title))&&this.$store.dispatch("Books/deleteBook",t._id).then((function(t){alert("Successfully deleted book ".concat(t.data.book.title))})).catch((function(){alert("An unexpected error occurred while deleting this book")}))},borrowBook:function(t){this.bookToBorrow=t},updateBook:function(t){this.bookToUpdate=t},isAdmin:function(){return this.$store.getters["Auth/getUser"].isAdmin},isAvailable:function(t){return!t.returned}},computed:Object(p["a"])(Object(p["a"])({},Object(A["c"])({books:"Books/getAllBooks",authors:"Books/getAuthors"})),{},{searchPlaceholder:function(){switch(this.nav){case"books":return"Book title or ISBN";case"authors":return"Author's name";default:return"Search"}}}),components:{BorrowBook:He,UpdateAuthor:Me,UpdateBook:Pe,CreateAuthor:ye,CreateBook:be,Footer:w,Hero:q,Navigation:S}},ze=Re,Ge=Object(c["a"])(ze,ce,le,!1,null,"93a6e864",null),We=Ge.exports,Qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"history"},[s("Hero",{attrs:{title:"History"}}),s("Navigation"),s("div",{staticClass:"container is-fluid my-5"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2"},[s("aside",{staticClass:"menu"},[s("p",{staticClass:"menu-label"},[t._v(" Search ")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.search,expression:"filter.search"}],staticClass:"input",attrs:{type:"text",placeholder:"Book/Author/User"},domProps:{value:t.filter.search},on:{input:function(e){e.target.composing||t.$set(t.filter,"search",e.target.value)}}})]),t._m(0),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.notReturned,expression:"filter.notReturned"}],attrs:{type:"checkbox",disabled:""},domProps:{checked:Array.isArray(t.filter.notReturned)?t._i(t.filter.notReturned,null)>-1:t.filter.notReturned},on:{change:function(e){var s=t.filter.notReturned,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o=null,n=t._i(s,o);a.checked?n<0&&t.$set(t.filter,"notReturned",s.concat([o])):n>-1&&t.$set(t.filter,"notReturned",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.filter,"notReturned",i)}}}),t._v(" Not returned yet ")]),s("br"),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.expired,expression:"filter.expired"}],attrs:{type:"checkbox",disabled:""},domProps:{checked:Array.isArray(t.filter.expired)?t._i(t.filter.expired,null)>-1:t.filter.expired},on:{change:function(e){var s=t.filter.expired,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o=null,n=t._i(s,o);a.checked?n<0&&t.$set(t.filter,"expired",s.concat([o])):n>-1&&t.$set(t.filter,"expired",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.filter,"expired",i)}}}),t._v(" Expired ")]),s("br")])]),s("div",{staticClass:"column is-8"},t._l(t.applyFilters(t.getHistory),(function(e){return s("article",{key:e._id,staticClass:"message is-primary"},[s("div",{staticClass:"message-header"},[s("a",{staticStyle:{"text-decoration":"none"},attrs:{target:"_blank"}},[t._v(" "+t._s(e.book.title)+" ("+t._s(e.book.isbn)+") ")]),null!==e.book.author?s("span",{staticClass:"has-text-weight-light"},[t._v("by "+t._s(e.book.author.firstName)+" "+t._s(e.book.author.lastName)+" ")]):s("span",{staticClass:"has-text-weight-light"},[t._v(" by Unknown Author ")])]),s("div",{staticClass:"message-body"},[s("div",{staticClass:"content"},[s("table",{staticClass:"table is-bordered is-fullwidth"},[s("tbody",[s("tr",[s("th",[t._v("History ID")]),s("td",[t._v(t._s(e._id))])]),s("tr",[s("th",[t._v("State")]),e.returned?s("td",{staticClass:"has-text-success"},[t._v("Returned")]):s("td",{staticClass:"has-text-danger"},[s("label",[t._v("Not returned yet")]),s("button",{staticClass:"button is-light is-success is-pulled-right",on:{click:function(s){return t.markAsFinal(e)}}},[t._v("Mark as returned ")])])]),s("tr",[s("th",[t._v("User")]),s("td",[t._v(t._s(t.getUserFullName(e.user)))]),s("td",{staticClass:"is-hidden-mobile"},[s("a",{attrs:{href:"mailto:"+t.getEmail(e.user)}},[t._v(t._s(t.getEmail(e.user)))])])]),s("tr",[s("th",[t._v("Borrowed")]),s("td",[t._v(t._s(t.dateFormat(e.date.from)))]),s("td",{staticClass:"is-hidden-mobile"},[t._v("Borrowed for "),s("strong",[t._v(t._s(t.borrowedPeriod(e.date)))]),t._v(" day(s) ")])]),s("tr",[s("th",[t._v("To be returned")]),s("td",[t._v(t._s(t.dateFormat(e.date.to)))]),s("td",{staticClass:"is-hidden-mobile"},[s("span",{domProps:{innerHTML:t._s(t.daysLeft(e.date))}})])])])])])])])})),0)])]),s("Footer")],1)},Je=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"menu-label"},[t._v(" Filters "),s("span",{staticClass:"coming-soon"},[t._v("Coming soon!")])])}],Ke=(s("841c"),s("4160"),s("159b"),s("bc3a")),Xe=s.n(Ke),Ve=Xe.a.create({baseURL:"https://pycrs.tech:444/api"});Ve.interceptors.request.use((function(t){var e=Bs.getters["Auth/getAccessToken"];return e&&(t.headers.Authorization=e),t}));var Ze,ts=Xe.a.create({baseURL:"https://quotes-inspirational-quotes-motivational-quotes.p.rapidapi.com",headers:{"x-rapidapi-key":"534f71a2e0msh462d67c3f7a7428p1c0887jsn5098de42488a"}}),es=Ve,ss={myBooks:[],authors:[],allBooks:[],history:[]},as={getMyBooks:function(t){return t.myBooks},getAllBooks:function(t){return t.allBooks},getAuthors:function(t){return t.authors},getWholeHistory:function(t){return t.history}},is={setBooks:function(t,e){e.forEach((function(e){return t.allBooks.push(e)}))},addBook:function(t,e){t.allBooks.push(e)},setMyBook:function(t,e){t.myBooks.push(e)},setAuthors:function(t,e){t.authors=e},addAuthor:function(t,e){return t.authors.push(e)},setUnavailableBook:function(t,e){t.unavailableBooks.push(e)},deleteAuthor:function(t,e){t.authors=t.authors.filter((function(t){return t["_id"]!==e}))},deleteBook:function(t,e){t.allBooks=t.allBooks.filter((function(t){return t["_id"]!==e}))},flushAllBooks:function(t){t.allBooks=[]},flushMyBooks:function(t){t.myBooks=[]},addHistory:function(t,e){return t.history.push(e)},flushWholeHistory:function(t){return t.history=[]},markAsFinalLocal:function(t,e){t.history.filter((function(t){var s=t._id;return s===e}))[0].returned=!0}},os={fetchAuthors:function(t){var e=t.commit,s=t.state;s.authors.length||es("/authors").then((function(t){e("setAuthors",t.data.authors)}))},fetchMyBooks:function(t){var e=t.commit,s=t.state;s.myBooks.length||es("/history").then((function(t){t.data.history.filter((function(t){return t.user===Bs.getters["Auth/getUser"]._id})).forEach((function(t){es("/history/".concat(t._id,"/extended")).then((function(t){var s=t.data.history.book;s["date"]=t.data.history.date,s["returned"]=t.data.history.returned,e("setMyBook",s)}))}))}))},reFetchMyBooks:function(t){var e=t.commit,s=t.dispatch;e("flushMyBooks"),s("fetchMyBooks")},fetchAllBooks:function(t){var e=t.commit,s=t.state;s.allBooks.length||es("/books/extended").then((function(t){e("setBooks",t.data.books)}))},fetchWholeHistory:function(t){var e=t.commit,s=t.state;s.history.length||es("/history").then((function(t){var s=t.data;s.history.forEach((function(t){es("/history/".concat(t._id,"/extended")).then((function(t){var s=t.data;e("addHistory",s.history)}))}))}))},reFetchHistory:function(t){var e=t.commit,s=t.dispatch;e("flushWholeHistory"),s("fetchWholeHistory")},reFetchAllBooks:function(t){var e=t.commit;es("/books/extended").then((function(t){e("flushAllBooks"),e("setBooks",t.data.books)}))},reFetchAllAuthors:function(t){var e=t.commit;es("/authors").then((function(t){e("setAuthors",t.data.authors)}))},createAuthor:function(t,e){var s=t.commit;return es.post("/authors",{firstName:e.firstName,lastName:e.lastName,born:e.born,died:e.died}).then((function(t){return s("addAuthor",t.data.author),t}))},createBook:function(t,e){var s=t.commit;return es.post("/books",e).then((function(t){return s("addBook",t.data.book),t}))},deleteBook:function(t,e){var s=t.commit;return es.delete("/books/".concat(e)).then((function(t){return s("deleteBook",e),t}))},deleteAuthor:function(t,e){var s=t.commit;return es.delete("/authors/".concat(e)).then((function(t){return s("deleteAuthor",e),t}))},updateBook:function(t,e){var s=t.dispatch;return es.patch("/books/".concat(e.id),e.data).then((function(t){return s("reFetchAllBooks"),s("reFetchMyBooks"),t}))},updateAuthor:function(t,e){return es.patch("/authors/".concat(e.id),e.data).then((function(e){return t.dispatch("reFetchAllAuthors").then(),e}))},borrowBook:function(t,e){return es.post("/history",e).then((function(t){return t}))},markAsReturned:function(t,e){var s=t.commit,a=t.dispatch;return es.patch("/history/".concat(e._id),{returned:!0}).then((function(t){return s("markAsFinalLocal",e._id),a("reFetchAllBooks"),a("reFetchMyBooks"),t}))}},ns={namespaced:!0,state:ss,getters:as,actions:os,mutations:is},rs={user:{},access_token:""},cs={getUser:function(t){return t.user},getAccessToken:function(t){return t.access_token}},ls={setUser:function(t,e){t.user=e},setAccessToken:function(t,e){t.access_token=e},updateName:function(t,e){t.user.firstName=e.firstName,t.user.lastName=e.lastName}},us={LOGIN:function(t,e){var s=t.commit,a=t.dispatch;return Xe.a.post("".concat(es.defaults.baseURL,"/auth/login"),{username:e.username,password:e.password},{withCredentials:!0}).then((function(t){return s("setAccessToken",t.data.token),s("setUser",t.data.user),ka.push("/dashboard").then(),setTimeout((function(){a("refreshToken")}),1e3*$s(t.data.token).ttl),t.data})).catch((function(t){return t.response.data}))},refreshToken:function(t){var e=t.commit,s=t.dispatch;return es.get("/auth/refresh_token",{withCredentials:!0}).then((function(t){return e("setAccessToken",t.data.token),e("setUser",t.data.user),console.log("Your access token has been automatically refreshed."),clearInterval(Ze),Ze=setInterval((function(){s("refreshToken")}),1e3*$s(t.data.token).ttl),t}))},registerNewUser:function(t,e){return es.post("/auth/signup",e)},forgotPassword:function(t,e){return es.post("/auth/forgot",e)},resetPassword:function(t,e){return es.patch("/auth/reset",e)},signOut:function(){return es.get("/auth/logout",{withCredentials:!0}).then((function(){return location.reload()})).catch((function(t){alert(t.response.data.message)}))},signOutEverywhere:function(t){var e=t.state;return es.get("/auth/logoutAll/".concat(e.user._id),{withCredentials:!0}).then((function(){return location.reload()}))}},ds={namespaced:!0,state:rs,getters:cs,actions:us,mutations:ls},ms={qod:"Fetching quote of the day",author:"No one ever"},fs={getQuote:function(t){return t.qod},getAuthor:function(t){return t.author}},hs={setup:function(t,e){t.qod=e.text,""!==e.author?t.author=e.author:t.author="Nobody"}},vs={fetchQuote:function(t){var e=t.commit;ts("/quote").then((function(t){e("setup",t.data)})).catch((function(){e("setup",{text:"Seems like there is no quote for today, better luck next time.",author:"QuoteAPI"})}))}},ps={namespaced:!0,state:ms,getters:fs,mutations:hs,actions:vs},bs={booksTotal:0,booksInUse:0,users:0},gs={getBooksTotal:function(t){return t.booksTotal},getBooksInUse:function(t){return t.booksInUse},getUsers:function(t){return t.users}},Cs={setup:function(t,e){t.booksTotal=e.booksTotal,t.booksInUse=e.booksInUse,t.users=e.users}},_s={fetchStats:function(t){var e=t.commit;es("/statistics").then((function(t){e("setup",t.data.statistics)}))}},ks={namespaced:!0,state:bs,getters:gs,mutations:Cs,actions:_s},ws={users:[]},ys={getUsers:function(t){return t.users}},Ns={setUsers:function(t,e){return t.users=e},flushUsers:function(t){return t.users=[]}},xs={fetchUsers:function(t){var e=t.commit,s=t.state;if(!s.users.length)return es("/users").then((function(t){e("setUsers",t.data.users)}))},reFetchUsers:function(t){var e=t.commit;return es("/users").then((function(t){e("flushUsers"),e("setUsers",t.data.users)}))},updateUser:function(t,e){return es.patch("/users/".concat(e._id),e)},deleteUser:function(t,e){return es.delete("/users/".concat(e._id))}},js={namespaced:!0,state:ws,getters:ys,mutations:Ns,actions:xs};a["a"].use(A["b"]),a["a"].config.devtools=!0;var As=new A["b"].Store({modules:{Books:ns,Auth:ds,Quote:ps,Statistics:ks,Users:js}}),Bs=As;function $s(t){return JSON.parse(atob(t.split(".")[1]))}function Us(t){var e=Bs.getters["Users/getUsers"].filter((function(e){var s=e._id;return s===t}));return e[0]}function Ps(){return!!Bs.getters["Auth/getAccessToken"]}var Os=Object(A["a"])("Books"),Ss=Os.mapGetters,Ds={name:"History",data:function(){return{filter:{search:"",expired:!1,notReturned:!1}}},components:{Navigation:S,Hero:q,Footer:w},created:function(){this.$store.dispatch("Users/fetchUsers"),this.$store.dispatch("Books/fetchWholeHistory")},computed:Object(p["a"])({},Ss({getHistory:"getWholeHistory"})),methods:{idToUser:function(t){return Us(t)},getUserFullName:function(t){var e=this.idToUser(t);return e.firstName+" "+e.lastName},getEmail:function(t){return this.idToUser(t).email},dateFormat:function(t){return H()(new Date(t)).format("MMMM Do YYYY")},daysLeft:function(t){var e=H()(new Date(t.to)).diff(new Date,"d"),s=H()(new Date(t.to)).diff(new Date,"hours");return s<=0?"Should have already been returned":(e>0?"<strong>"+e+"</strong> day(s) left":"<strong>"+s+"</strong> hour(s) left")+" to return"},borrowedPeriod:function(t){return Math.ceil(H()(new Date(t.to)).diff(new Date(t.from),"h")/24)},applyFilters:function(t){var e=this,s=t;return s.filter((function(t){var s=t.book,a=t.user;return s.title.toLowerCase().includes(e.filter.search)||s.author.firstName.toLowerCase().includes(e.filter.search)||s.author.lastName.toLowerCase().includes(e.filter.search)||e.idToUser(a).firstName.toLowerCase().includes(e.filter.search)||e.idToUser(a).lastName.toLowerCase().includes(e.filter.search)})),s},markAsFinal:function(t){this.$store.dispatch("Books/markAsReturned",t)}}},Es=Ds,Fs=(s("7219"),Object(c["a"])(Es,Qe,Je,!1,null,"7f09cb75",null)),Ms=Fs.exports,Ts=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"users"},[s("Hero",{attrs:{title:"Users"}}),s("Navigation"),s("div",{staticClass:"container is-fluid my-5"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2"},[s("aside",{staticClass:"menu"},[s("p",{staticClass:"menu-label"},[t._v(" Search ")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"input",attrs:{type:"text",placeholder:"First/last name or username"},domProps:{value:t.filter},on:{input:function(e){e.target.composing||(t.filter=e.target.value)}}})]),s("p",{staticClass:"menu-label"},[t._v(" General ")]),s("ul",{staticClass:"menu-list"},[s("li",[s("a",{class:t.isActive("users","user-update"),on:{click:function(e){return t.changeNav("users")}}},[t._v("Users "),s("span",{staticClass:"is-pulled-right"},[t._v(t._s(t.users.length))])])])]),s("p",{staticClass:"menu-label"},[t._v(" Administration ")]),s("ul",{staticClass:"menu-list"},[s("li",[s("a",{class:t.isActive("user-create"),on:{click:function(e){return t.changeNav("user-create")}}},[t._v("Register new user")])])])])]),s("div",{staticClass:"column is-10"},["users"===this.nav?s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},t._l(t.users.filter((function(e){var s=e.firstName,a=e.lastName,i=e.username;return s.toLowerCase().includes(t.filter)||a.toLowerCase().includes(t.filter)||i.toLowerCase().includes(t.filter)})),(function(e){return s("div",{key:e._id,staticClass:"card mb-3"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"media"},[t._m(0,!0),s("div",{staticClass:"media-content"},[s("p",{staticClass:"title is-4 mb-1"},[s("span",{staticClass:"rank subtitle",class:e.isAdmin?"admin":"user"}),s("span",{staticClass:"is-size-4"},[t._v(" "+t._s(e.firstName)+" "+t._s(e.lastName)+" ")]),s("span",{staticClass:"has-text-weight-light"},[t._v("("+t._s(e.username)+")")])]),s("span",[t._v(t._s(e._id))]),s("br"),t.isCurrentUser(e._id)?s("strong",[t._v("Hey, that's you!")]):t._e()])]),s("div",{staticClass:"content"},[s("div",{staticClass:"mb-2"},[s("strong",[t._v("Email: ")]),s("span",[t._v(t._s(e.email))])]),t._v(" Registered on "+t._s(t.registeredAt(e.registeredAt).format("Do MMMM YYYY HH:mm"))+" ")]),t.isLoggedIn&&!t.isCurrentUser(e._id)?s("div",{staticClass:"card-footer"},[s("a",{staticClass:"mt-3 mx-3",on:{click:function(s){return t.deleteUser(e)}}},[s("i",{staticClass:"fas fa-trash has-text-danger"})]),s("a",{staticClass:"mt-3 mx-3",on:{click:function(s){t.updateUser(e),t.changeNav("user-update")}}},[s("i",{staticClass:"fas fa-edit has-text-info"})])]):t._e()])])})),0)])]):t._e(),"user-update"===this.nav?s("div",[s("UpdateUser",{attrs:{user:t.userToUpdate},on:{changeNav:t.changeNav}})],1):t._e(),"user-create"===this.nav?s("div",[s("CreateUser")],1):t._e()])])]),s("Footer")],1)},qs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"media-left"},[s("i",{staticClass:"fas fa-user fa-4x",staticStyle:{color:"#7957d5"}})])}],Ls=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.updateUser(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("First name")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"input",attrs:{type:"text",placeholder:this.user.firstName},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}}),s("span",{staticClass:"icon is-small is-left"},[t._v(" F ")])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Last name")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"input",attrs:{type:"text",placeholder:this.user.lastName},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),s("span",{staticClass:"icon is-small is-left"},[t._v(" L ")])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Password")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{id:"password",type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(0)])]),s("button",{staticClass:"button is-outlined button-smooth is-success mr-3",attrs:{type:"submit"}},[t._v(" Submit ")])])},Is=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-lock"})])}],Ys={name:"UpdateUser",props:["user"],data:function(){return{firstName:"",lastName:"",password:""}},methods:{updateUser:function(){var t=this;this.$store.dispatch("Users/updateUser",{_id:this.user._id,firstName:""===this.firstName?this.user.firstName:this.firstName,lastName:""===this.lastName?this.user.lastName:this.lastName,password:""===this.password?this.user.password:this.password}).then((function(){t.$store.dispatch("Users/reFetchUsers"),t.$emit("changeNav","users")}))}}},Hs=Ys,Rs=Object(c["a"])(Hs,Ls,Is,!1,null,"713ee574",null),zs=Rs.exports,Gs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{onsubmit:""},on:{submit:function(e){return e.preventDefault(),t.createUser(e)}}},[""!==t.result.message?s("article",{staticClass:"message",class:t.result.success?"is-success":"is-danger"},[s("div",{staticClass:"message-header"},[s("p",[t._v(t._s(t.result.message))])])]):t._e(),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("First name")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.firstName,expression:"user.firstName"}],staticClass:"input",attrs:{type:"text",placeholder:"John",required:""},domProps:{value:t.user.firstName},on:{input:function(e){e.target.composing||t.$set(t.user,"firstName",e.target.value)}}}),s("span",{staticClass:"icon is-left"},[t._v(" F ")])])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Last name")]),s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.lastName,expression:"user.lastName"}],staticClass:"input",attrs:{type:"text",placeholder:"Doe",required:""},domProps:{value:t.user.lastName},on:{input:function(e){e.target.composing||t.$set(t.user,"lastName",e.target.value)}}}),s("span",{staticClass:"icon is-left"},[t._v(" L ")])])]),s("label",{staticClass:"label"},[t._v("Username")]),s("b-field",[s("b-input",{attrs:{type:"text",placeholder:"johndoe69","icon-pack":"fas",icon:"user",required:""},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),s("label",{staticClass:"label"},[t._v("Email")]),s("b-field",[s("b-input",{attrs:{type:"email",placeholder:"john@gmail.com","icon-pack":"fas",icon:"envelope",required:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),s("label",{staticClass:"label"},[t._v("Password")]),s("b-field",[s("b-input",{attrs:{type:"password",placeholder:"password123","icon-pack":"fas",icon:"lock","password-reveal":"",required:""},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),s("button",{staticClass:"button is-outlined button-smooth is-success mr-3",attrs:{type:"submit"}},[t._v(" Submit ")]),s("button",{staticClass:"button is-outlined button-smooth is-link",attrs:{type:"reset"}},[t._v(" Reset ")])],1)},Ws=[],Qs={name:"CreateUser",data:function(){return{user:{firstName:"",lastName:"",username:"",email:"",password:""},result:{success:!0,message:""}}},methods:{createUser:function(){var t=this;this.$store.dispatch("Auth/registerNewUser",this.user).then((function(){t.result={success:!0,message:"Successfully registered new user."},t.$store.dispatch("Users/reFetchUsers")})).catch((function(e){e.response.data.message.details&&0!==e.response.data.message.details.length?t.result={success:!1,message:e.response.data.message.details[0].message}:t.result={success:!1,message:e.response.data.message}}))}}},Js=Qs,Ks=Object(c["a"])(Js,Gs,Ws,!1,null,"2ba465da",null),Xs=Ks.exports,Vs=Object(A["a"])("Users"),Zs=Vs.mapGetters,ta={name:"Users",data:function(){return{filter:"",nav:"users",userToUpdate:{}}},methods:{isActive:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];if(e.includes(this.nav))return"is-active"},isLoggedIn:function(){return Ps()},registeredAt:function(t){return H()(t)},changeNav:function(t){this.nav!==t&&(this.nav=t)},deleteUser:function(t){var e=this;confirm("Are you sure you want to delete this user's account?")&&this.$store.dispatch("Users/deleteUser",t).then((function(){alert("User ".concat(t.firstName," ").concat(t.lastName," deleted")),e.$store.dispatch("Users/reFetchUsers")})).catch((function(t){var e=t.response;alert(e.data.message)}))},updateUser:function(t){this.userToUpdate=t},isCurrentUser:function(t){return this.$store.getters["Auth/getUser"]._id===t}},created:function(){this.$store.dispatch("Users/fetchUsers")},components:{CreateUser:Xs,UpdateUser:zs,Footer:w,Navigation:S,Hero:q},computed:Object(p["a"])({},Zs({users:"getUsers"}))},ea=ta,sa=Object(c["a"])(ea,Ts,qs,!1,null,"54f536d2",null),aa=sa.exports,ia=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-books"},[s("Hero",{attrs:{title:"My Books"}}),s("Navigation"),s("div",{staticClass:"container mt-3"},[s("div",{staticClass:"tabs is-centered"},[s("ul",[s("li",{class:t.isActive("all")},[s("a",{on:{click:function(e){return t.changeNav("all")}}},[t._v("All books")])]),s("li",{class:t.isActive("active")},[s("a",{on:{click:function(e){return t.changeNav("active")}}},[t._v("Active books")])]),s("li",{class:t.isActive("expired")},[s("a",{on:{click:function(e){return t.changeNav("expired")}}},[t._v("Expired books")])])])]),s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-11"},[t.myBooks.length<=0?s("h1",{staticClass:"subtitle has-text-centered"},[t._v("Not much of a reader, are you?")]):t._e(),t._l(t.filteredBooks,(function(e){return s("article",{key:e._id,staticClass:"message",class:t.getColor},[s("div",{staticClass:"message-header"},[s("a",{staticStyle:{"text-decoration":"none"},attrs:{target:"_blank",href:"https://www.google.com/search?tbm=bks&q="+t.normalizeName(e.title).replace(" ","+")}},[t._v(" "+t._s(e.title)+" ("+t._s(e.writtenIn)+")")]),s("span",{staticClass:"has-text-weight-light"},[t._v("by "+t._s(e.author.firstName)+" "+t._s(e.author.lastName))])]),s("div",{staticClass:"message-body"},[s("div",{staticClass:"content"},[s("p",{staticClass:"pb-2",staticStyle:{"border-bottom":"1px solid gray"}},[t._v(" You borrowed this book on "+t._s(t.formatBorrowedDate(e.date.from))+". "),e.returned?s("span",[t._v(" It reached it's expiration or you have already returned it. ")]):s("span",[t._v(" You have "),t.daysLeft(e.date)>=1?s("span",[s("strong",[t._v(t._s(t.daysLeft(e.date)))]),t._v(" more day(s) to return it. ")]):s("span",[s("strong",[t._v(t._s(t.hoursLeft(e.date)))]),t._v(" more hour(s) to return it. ")])])]),s("p",[s("strong",[t._v("Pages:")]),t._v(" "+t._s(e.pageCount))]),s("p",[s("strong",[t._v("ISBN:")]),t._v(" "+t._s(e.isbn))])])])])}))],2)])]),s("Footer")],1)},oa=[],na=Object(A["a"])("Books"),ra=na.mapGetters,ca={name:"MyBooks",data:function(){return{nav:"active"}},created:function(){this.$store.dispatch("Books/fetchMyBooks")},methods:{changeNav:function(t){this.nav!==t&&(this.nav=t)},isActive:function(t){if(t===this.nav)return"is-active"},formatBorrowedDate:function(t){return H()(new Date(t)).format("MMMM Do YYYY")},daysLeft:function(t){return H()(t.to).diff(H()(t.from),"days")},hoursLeft:function(t){return H()(t.to).diff(H()(),"hours")},normalizeName:function(t){return s("0bdc").remove(t)}},computed:Object(p["a"])(Object(p["a"])({},ra({myBooks:"getMyBooks"})),{},{getColor:function(){switch(this.nav){case"active":return"is-success";case"expired":return"is-danger"}return""},filteredBooks:function(){switch(this.nav){case"active":return this.myBooks.filter((function(t){return new Date(t.date.to).getTime()>(new Date).getTime()})).sort((function(t,e){return new Date(t.date.to)-new Date(e.date.to)}));case"expired":return this.myBooks.filter((function(t){return new Date(t.date.to).getTime()<(new Date).getTime()})).sort((function(t,e){return new Date(t.date.to)-new Date(e.date.to)}));default:return this.myBooks}}}),components:{Footer:w,Navigation:S,Hero:q}},la=ca,ua=Object(c["a"])(la,ia,oa,!1,null,"7708ef63",null),da=ua.exports,ma=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"forgot-password"},[s("Hero",{attrs:{title:"Forgot your password?"}}),s("div",{staticClass:"container has-text-centered mt-6"},[s("div",{staticClass:"columns"},[t.tokenPreset()?s("div",{staticClass:"column\n    is-10-mobile is-offset-1-mobile\n    is-8-tablet is-offset-2-tablet\n    is-6-desktop is-offset-3-desktop\n    is-4-widescreen is-offset-4-widescreen"},[s("form",{staticClass:"box",on:{submit:function(e){return e.preventDefault(),t.changePass(e)}}},[s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPass,expression:"newPass"}],staticClass:"input",attrs:{type:"password",placeholder:"New password",required:""},domProps:{value:t.newPass},on:{input:function(e){e.target.composing||(t.newPass=e.target.value)}}}),t._m(2)])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassConfirm,expression:"newPassConfirm"}],staticClass:"input",attrs:{type:"password",placeholder:"Confirm new password",required:""},domProps:{value:t.newPassConfirm},on:{input:function(e){e.target.composing||(t.newPassConfirm=e.target.value)}}}),t._m(3)])]),t._m(4)])]):s("div",{staticClass:"column\n    is-10-mobile is-offset-1-mobile\n    is-8-tablet is-offset-2-tablet\n    is-6-desktop is-offset-3-desktop\n    is-4-widescreen is-offset-4-widescreen"},[t.emailSent?s("div",{staticClass:"notification is-success is-light p-2"},[t._v(" Email has been sent to "+t._s(t.email)+" ")]):t._e(),t.emailSent?s("p",{staticClass:"box"},[t._v("Didn't receive an email? "),s("a",{on:{click:t.sendEmail}},[t._v("Send again.")])]):t._e(),t.emailSent?t._e():s("form",{staticClass:"box",on:{submit:function(e){return e.preventDefault(),t.sendEmail(e)}}},[s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email",autocomplete:"on",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(0)])]),t._m(1),s("router-link",{attrs:{to:"/login"}},[t._v(" I remembered, take me back ")])],1)])])]),s("Footer")],1)},fa=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button button-smooth is-outlined is-primary is-medium is-fullwidth is-rounded",attrs:{type:"submit"}},[s("i",{staticClass:"fas fa-envelope mr-2"}),t._v(" Send email ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-lock"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-lock"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button button-smooth is-outlined is-primary is-medium is-fullwidth is-rounded",attrs:{type:"submit"}},[s("i",{staticClass:"fas fa-lock mr-2"}),t._v(" Change password ")])])])}],ha=(s("d3b7"),{name:"ForgotPassword",data:function(){return{email:"",emailSent:!1,newPass:"",newPassConfirm:""}},methods:{sendEmail:function(){var t=this;this.$store.dispatch("Auth/forgotPassword",{email:this.email}).catch((function(t){console.log(t.response)})).finally((function(){t.emailSent=!0}))},changePass:function(){this.newPass!==this.newPassConfirm&&alert("Your new password does not match the confirmation password."),this.$store.dispatch("Auth/resetPassword",{token:this.$route.query.t,password:this.newPass}).then((function(){alert("You successfully changed your password."),ka.push("/login")}))},tokenPreset:function(){return!!this.$route.query.t}},components:{Footer:w,Hero:q}}),va=ha,pa=Object(c["a"])(va,ma,fa,!1,null,"2f308cc9",null),ba=pa.exports;a["a"].use(f["a"]);var ga=[{path:"/",name:"Welcome",component:Ht,meta:{redirectIfLoggedIn:!0}},{path:"/dashboard",alias:"/dash",name:"Dashboard",component:rt,meta:{navbar:!0,requiresAuth:!0}},{path:"/books",name:"Books",component:We,meta:{navbar:!0,requiresAuth:!0}},{path:"/my-books",name:"My Books",component:da,meta:{navbar:!0,requiresAuth:!0}},{path:"/history",name:"History",component:Ms,meta:{navbar:!0,requiresAuth:!0,requiresAdmin:!0}},{path:"/users",name:"Users",component:aa,meta:{navbar:!0,requiresAdmin:!0,requiresAuth:!0}},{path:"/profile",name:"Profile",component:Mt,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:ee,meta:{redirectIfLoggedIn:!0}},{path:"/forgot-password",name:"Forgotten password",component:ba,meta:{redirectIfLoggedIn:!0}},{path:"/signup",name:"SignUp",component:re,meta:{redirectIfLoggedIn:!0}},{path:"*",component:Jt}],Ca=new f["a"]({mode:"history",routes:ga,linkActiveClass:"is-active",linkExactActiveClass:"is-active-exact"});function _a(){return Bs.getters["Auth/getAccessToken"]}Ca.beforeEach(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e,s,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(document.title="".concat(e.name||"Welcome"," | Library Management System"),_a()){t.next=4;break}return t.next=4,Bs.dispatch("Auth/refreshToken").catch((function(){e.meta&&e.meta.requiresAuth&&(console.error("Your access token could not be refreshed, please log in."),Ca.push("/login"))}));case 4:e.meta&&e.meta.redirectIfLoggedIn&&_a()&&a("/dashboard"),e.meta&&e.meta.requiresAdmin&&!Bs.getters["Auth/getUser"].isAdmin&&a(s.path),a();case 7:case"end":return t.stop()}}),t)})));return function(e,s,a){return t.apply(this,arguments)}}());var ka=Ca;s("e008"),a["a"].use(d["a"]),a["a"].config.productionTip=!1,new a["a"]({router:ka,store:Bs,render:function(t){return t(u)}}).$mount("#app")},"584e":function(t,e,s){"use strict";var a=s("063c"),i=s.n(a);i.a},6:function(t,e){},7:function(t,e){},7098:function(t,e,s){},7219:function(t,e,s){"use strict";var a=s("f2dc"),i=s.n(a);i.a},"761e":function(t,e,s){},8:function(t,e){},9:function(t,e){},c72e:function(t,e,s){},e008:function(t,e,s){},e723:function(t,e,s){"use strict";var a=s("7098"),i=s.n(a);i.a},e7c7:function(t,e,s){},ecf9:function(t,e,s){},ee6e:function(t,e,s){"use strict";var a=s("c72e"),i=s.n(a);i.a},f2dc:function(t,e,s){}});
//# sourceMappingURL=app.17612263.js.map